---
layout: post
---

# CentOS6.5下中文乱码的问题解决

最近在为云服务器部署jekyll时，一直失败，提示：

    invalid byte sequence in UTF-8

发现原来是中文文件名乱码导致的，于是开始痛苦的排查解决旅程。

## 具体问题

问题具体可以分为以下两个：  

1. CentOS下中文显示乱码
2. CentOS下中文文件名显示乱码

## 修复中文显示乱码

1. 首先安装中文语言包：
    
        # yum groupinstall chinese-support

2. 修改系统默认语言：  

        # vi /etc/sysconfig/i18n
        LANG="zh-CN.UTF-8"
        # vim /etc/profile
        export LC_ALL="zh_CN.UTF-8"

3. 重启：  

        # reboot

4. 查看当前语言环境：  

        # locale  
    显示以下信息：  

        LANG=zh_CN.UTF-8
        LC_CTYPE="zh_CN.UTF-8"
        LC_NUMERIC="zh_CN.UTF-8"
        LC_TIME="zh_CN.UTF-8"
        LC_COLLATE="zh_CN.UTF-8"
        LC_MONETARY="zh_CN.UTF-8"
        LC_MESSAGES="zh_CN.UTF-8"
        LC_PAPER="zh_CN.UTF-8"
        LC_NAME="zh_CN.UTF-8"
        LC_ADDRESS="zh_CN.UTF-8"
        LC_TELEPHONE="zh_CN.UTF-8"
        LC_MEASUREMENT="zh_CN.UTF-8"
        LC_IDENTIFICATION="zh_CN.UTF-8"
        LC_ALL=zh_CN.UTF-8

5. 修改链接终端编码：  

    我用的是SecureCRT，进入选项->会话选项，点击外观，右边的字符编码选择UTF-8，如图所示：  
    ![Alt](http://ww2.sinaimg.cn/large/6321ab24gw1ep7ki47s9rj20ey0d4jta.jpg)

## 修复中文文件名显示乱码  

按照上面的步骤配置好系统的中文语言环境后，系统的中文显示已经正常，但是中文文件名还是显示乱码，上网搜索资料后发现，原来是编码不一致导致的：  
> windows的文件名中文编码默认为GBK,而Linux中默认文件名编码为UTF8,由于编码不一致，所以导致了文件名乱码的问题，解决这个问题需要对文件名进行转码。  

于是使用编码转换工具convmv开始转换：  

1. 安装convmv:  

        yum -y install convmv

2. 开始转码：  

        convmv -f GBK -t UTF-8 --notest _posts -r  

这样操作后，中文文件名终于显示正常。

## 参考

1. <http://jingyan.baidu.com/article/ab69b270de8b4f2ca7189f1d.html>
2. <http://blog.csdn.net/niuhea/article/details/8050568>
3. <http://www.360doc.com/content/08/1119/13/11192_1957232.shtml>
    


