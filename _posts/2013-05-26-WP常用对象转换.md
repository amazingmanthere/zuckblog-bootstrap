---
layout: post
---

# WP常用对象转换

## 将总秒数转换为DateTime对象  

     public static DateTime ConvertFromUnixTimestamp(double timestamp)
     {
          DateTime origin = new DateTime(1970, 1, 1, 0, 0, 0, 0);
          return origin.AddSeconds(timestamp);
     }


## 将DateTime对象转换为总秒数  

     public static double ConvertToUnixTimestamp(DateTime date)
     {
          DateTime origin = new DateTime(1970, 1, 1, 0, 0, 0, 0);
          TimeSpan diff = date.ToUniversalTime() - origin;
          return Math.Floor(diff.TotalSeconds);
     }

## WriteableBitmap对象转化为byte数组  

     public byte[] WriteableBitmapConvertToBytes(WriteableBitmap wb)
     {
          byte[] bytes = null;
          using (MemoryStream ms = new MemoryStream())
          {
               wb.SaveJpeg(ms, wb.PixelWidth, wb.PixelHeight, 0, 100);
               bytes = ms.ToArray();
          }
          return bytes;
     }

## byte数组转化为BitmapImage对象  

     public BitmapImage BytesConvertToBitmapImage(byte[] bytes)
     {
          MemoryStream ms = new MemoryStream(bytes);
          BitmapImage image = new BitmapImage();
          image.SetSource(ms);
          return image;
     }

## BitmapImage对象转化为WriteableBitmap对象  

     public WriteableBitmap BitmapImageConvertToWriteableBitmap(BitmapImage image)
     {
          WriteableBitmap writeableBitmap = new WriteableBitmap(image);
          return writeableBitmap;
     }

## BitmapImage对象转化为byte数组  

     public byte[] BitmapImageConvertToBytes(BitmapImage image)
     {
          WriteableBitmap writeableBitmap = new WriteableBitmap(image);
          return WriteableBitmapConvertToBytes(writeableBitmap);
     }